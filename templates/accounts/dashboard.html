{% extends "main.html" %}
{% load static %}
{% load mahimsoft_tags %}
{% comment %} {% load i18n %} {% endcomment %}
{% block extend_header%}
<style>
    a.shareholder:link {
        color: chocolate;
    }

    a.shareholder:visited {
        color: chocolate;
    }

    a.shareholder:active {
        color: blueviolet;
    }

    a.shareholder:hover {
        color: darkturquoise;
    }

    /* a.deposit:link {
        color: coral;
    }

    a.deposit:visited {
        color: gold;
    }

    a.deposit:active {
        color: coral;
    }

    a.deposit:hover {
        color: gold;
    } */
</style>
{%endblock%}
{% block content %}

<div class="container">
    <div class="row row-cols-1 row-cols-lg-2 p-0 m-0 mt-0">
        <div class="col p-0 m-0" style="border: thin; border-color: brown;">
            <div class="card m-1">
                {{ fig_pie_chart|safe }}
            </div>
        </div>
        <div class="col p-0 m-0" style="border: thin; border-color: brown;">
            <div class="card m-1">
                {{ chart_deposit_target|safe }}
            </div>
        </div>
    </div>
    <div class="d-flex justify-content-center m-1 mt-0">
        <div class="card text-start" style="width: 33%;">
            <!-- <img class="card-img-top" src="holder.js/100px180/" alt="Title" /> -->
            <div class="card-header ps-2 py-0 me-0 text-muted" style="background-color: #E3E3E3;">
                <h5 class="p-0">Amount Deposited:</h5>
            </div>
            <div class="card-body">
                <h5 class="card-text text-center">Taka: {{total_deposited.amount__sum|intcomma_bd}}</h5>
            </div>
        </div>
        <div class="card text-start ms-1" style="width: 33%;">
            <!-- <img class="card-img-top bg-light" src="holder.js/100px180/" alt="Title" /> -->
            <div class="card-header ps-2 py-0 me-0 text-muted" style="background-color: #E3E3E3;">
                <h5 class="p-0">Total Expenditure:</h5>
            </div>
            <div class="card-body">
                <h5 class="card-text text-center">Taka: {{total_deposited.amount__sum|intcomma_bd}}</h5>
            </div>
        </div>
        <div class="card text-start ms-1" style="width: 33%;">
            <!-- <img class="card-img-top bg-light" src="holder.js/100px180/" alt="Title" /> -->
            <div class="card-header ps-2 py-0 me-0 text-muted" style="background-color: #E3E3E3;">
                <h5 class="p-0">Amount Available:</h5>
            </div>
            <div class="card-body">
                <h5 class="card-text text-center">Taka:
                    {{total_deposited.amount__sum|subtract:total_Expenditure.amount__sum|intcomma_bd}}</h5>
            </div>
        </div>
    </div>
    <br>
    <br>
    <div class="row row-cols-1 row-cols-lg-2 ms-1 me-1">
        <div class="col p-0 m-0" style="border: thin; border-color: brown;">
            <div class="card">
            <div class="card-header ps-2 py-0 me-0 text-muted" style="background-color: #E3E3E3;">
            <h5>Flat Distribution</h5>
            </div>
            <div class="text-center me-0">
                    <img src="{% static 'images/FlatDistribution.PNG' %}" class="card-img-top" alt="shareholder"
                        style="width: 498px; height: 367px;">

                {% comment %} <!-- {{ chart_shareholder|safe }} --> {% endcomment %}

            </div>
            <br>
            <br>
        </div>
        </div>
        <div class="col p-0 m-0" style="border: thin; border-color: brown;">
            <div class="card ms-1">
                <div class="card-header ps-2 py-0 me-0 text-muted" style="background-color: #E3E3E3;">
                    <h5>Shareholders Deposit Information</h5>
                    </div>
                <div class="table table-active mb-0 pb-0">
                    <table class="table table-sm align-middle table-responsive">
                        <tr>
                            <th>#</th>
                            <th>Sahreholder</th>
                            <th>Nos. of Flat</th>
                            <th>Deposited Amnt</th>
                            <th>Amnt to Deposit</th>
                        </tr>
                        {% for x in qs_data %}
                        <tr>
                            <td>{{forloop.counter}}</td>
                            <td>
                                <div class="d-flex justify-content-between p-0">
                                    {{x.shareholderName}}
                                    <a class="shareholder" href="{{x.get_absolute_url}}" target="_blank">
                                        <i class="bi bi-file-earmark-text-fill"></i></a>
                                </div>
                            </td>
                            <td class="text-center">{{x.numberOfFlat|floatformat:"1"}}</td>
                            <td class="text-end">
                                <div class="d-flex justify-content-end">
                                    {{x.deposited_sum|intcomma_bd}}
                                    <a class="deposit ps-2" href="/shareholder_deposit_list/{{x.id}}" target="_blank">
                                        <i class="bi bi-file-earmark-text-fill"></i></a>
                                </div>

                            </td>
                            <td class="text-end pe-2">{{x.amount_to_deposit|subtract:x.deposited_sum|intcomma_bd}}</td>
                        </tr>

                        {% endfor %}

                    </table>
                </div>
                <div class="text-center py-0 m-0 text-success">
                    <h5 class="m-0 p-0">Trargeted Amount Per Share: Tk. {{targeted_amount|intcomma_bd}}</h5>
                </div>
            </div>
        </div>
    </div>
    <br>
    <div class="row row-cols-1 row-cols-lg-2 p-0 m-0">
        <div class="col p-0 m-0" style="border: thin; border-color: brown;">
    <div class="card p-0 m-0">
        {{ chart_shareholder|safe }}
    </div>
</div>
<div class="col p-0 m-0" style="border: thin; border-color: brown;">
    <div class="card p-0 m-0">
        {{ fig_bar_chart|safe }}
    </div>
</div>
</div>
<br>
</div>
{% endblock %}